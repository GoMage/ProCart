<?php eval(base64_decode("LyoqICogR29NYWdlIFByb2NhcnQgRXh0ZW5zaW9uICogKiBAY2F0ZWdvcnkgRXh0ZW5zaW9uICogQGNvcHlyaWdodCBDb3B5cmlnaHQgKGMpIDIwMTAtMjAxNiBHb01hZ2UgKGh0dHBzOi8vd3d3LmdvbWFnZS5jb20pICogQGF1dGhvciBHb01hZ2UgKiBAbGljZW5zZSBodHRwczovL3d3dy5nb21hZ2UuY29tL2xpY2Vuc2UtYWdyZWVtZW50LyBTaW5nbGUgZG9tYWluIGxpY2Vuc2UgKiBAdGVybXMgb2YgdXNlIGh0dHBzOi8vd3d3LmdvbWFnZS5jb20vdGVybXMtb2YtdXNlICogQHZlcnNpb24gUmVsZWFzZTogMi4yLjAgKiBAc2luY2UgQ2xhc3MgYXZhaWxhYmxlIHNpbmNlIFJlbGVhc2UgMS4wICovIGNsYXNzIEdvTWFnZV9Qcm9jYXJ0X0hlbHBlcl9EYXRhIGV4dGVuZHMgTWFnZV9Db3JlX0hlbHBlcl9BYnN0cmFjdCB7IHByb3RlY3RlZCAkaXNfaW5mb3J0aXNfdWx0aW1vOyBwdWJsaWMgZnVuY3Rpb24gZ2V0Q29uZmlnRGF0YSgkbm9kZSkgeyByZXR1cm4gTWFnZTo6Z2V0U3RvcmVDb25maWcoJ2dvbWFnZV9wcm9jYXJ0LycgLiAkbm9kZSk7IH0gcHVibGljIGZ1bmN0aW9uIGdldEFsbFN0b3JlRG9tYWlucygpIHsgJGRvbWFpbnMgPSBhcnJheSgpOyBmb3JlYWNoIChNYWdlOjphcHAoKS0+Z2V0V2Vic2l0ZXMoKSBhcyAkd2Vic2l0ZSkgeyAkdXJsID0gJHdlYnNpdGUtPmdldENvbmZpZygnd2ViL3Vuc2VjdXJlL2Jhc2VfdXJsJyk7IGlmICgkZG9tYWluID0gdHJpbShwcmVnX3JlcGxhY2UoJy9eLio/XFwvXFwvKC4qKT9cXC8vJywgJyQxJywgJHVybCkpKSB7ICRkb21haW5zW10gPSAkZG9tYWluOyB9ICR1cmwgPSAkd2Vic2l0ZS0+Z2V0Q29uZmlnKCd3ZWIvc2VjdXJlL2Jhc2VfdXJsJyk7IGlmICgkZG9tYWluID0gdHJpbShwcmVnX3JlcGxhY2UoJy9eLio/XFwvXFwvKC4qKT9cXC8vJywgJyQxJywgJHVybCkpKSB7ICRkb21haW5zW10gPSAkZG9tYWluOyB9IH0gcmV0dXJuIGFycmF5X3VuaXF1ZSgkZG9tYWlucyk7IH0gcHVibGljIGZ1bmN0aW9uIGdldEF2YWlsYWJlbFdlYnNpdGVzKCkgeyByZXR1cm4gJHRoaXMtPl93KCk7IH0gcHVibGljIGZ1bmN0aW9uIGdldEF2YWlsYXZlbFdlYnNpdGVzKCkgeyByZXR1cm4gJHRoaXMtPl93KCk7IH0gcHJvdGVjdGVkIGZ1bmN0aW9uIF93KCkgeyBpZiAoIU1hZ2U6OmdldFN0b3JlQ29uZmlnKCdnb21hZ2VfYWN0aXZhdGlvbi9wcm9jYXJ0L2luc3RhbGxlZCcpIHx8IChpbnR2YWwoTWFnZTo6Z2V0U3RvcmVDb25maWcoJ2dvbWFnZV9hY3RpdmF0aW9uL3Byb2NhcnQvY291bnQnKSkgPiAxMCkgKSB7IHJldHVybiBhcnJheSgpOyB9ICR0aW1lX3RvX3VwZGF0ZSA9IDYwICogNjAgKiAyNCAqIDE1OyAkciA9IE1hZ2U6OmdldFN0b3JlQ29uZmlnKCdnb21hZ2VfYWN0aXZhdGlvbi9wcm9jYXJ0L2FyJyk7ICR0ID0gTWFnZTo6Z2V0U3RvcmVDb25maWcoJ2dvbWFnZV9hY3RpdmF0aW9uL3Byb2NhcnQvdGltZScpOyAkcyA9IE1hZ2U6OmdldFN0b3JlQ29uZmlnKCdnb21hZ2VfYWN0aXZhdGlvbi9wcm9jYXJ0L3dlYnNpdGVzJyk7ICRsYXN0X2NoZWNrID0gc3RyX3JlcGxhY2UoJHIsICcnLCBNYWdlOjpoZWxwZXIoJ2NvcmUnKS0+ZGVjcnlwdCgkdCkpOyAkYWxsc2l0ZXMgPSBleHBsb2RlKCcsJywgc3RyX3JlcGxhY2UoJHIsICcnLCBNYWdlOjpoZWxwZXIoJ2NvcmUnKS0+ZGVjcnlwdCgkcykpKTsgJGFsbHNpdGVzID0gYXJyYXlfZGlmZigkYWxsc2l0ZXMsIGFycmF5KCIiKSk7IGlmICgoJGxhc3RfY2hlY2sgKyAkdGltZV90b191cGRhdGUpIDwgdGltZSgpKSB7ICR0aGlzLT5hKE1hZ2U6OmdldFN0b3JlQ29uZmlnKCdnb21hZ2VfYWN0aXZhdGlvbi9wcm9jYXJ0L2tleScpLCBpbnR2YWwoTWFnZTo6Z2V0U3RvcmVDb25maWcoJ2dvbWFnZV9hY3RpdmF0aW9uL3Byb2NhcnQvY291bnQnKSksIGltcGxvZGUoJywnLCAkYWxsc2l0ZXMpICk7IH0gcmV0dXJuICRhbGxzaXRlczsgfSBwdWJsaWMgZnVuY3Rpb24gYSgkaywgJGMgPSAwLCAkcyA9ICcnKSB7ICRjaCA9IGN1cmxfaW5pdCgpOyBjdXJsX3NldG9wdCgkY2gsIENVUkxPUFRfVVJMLCBzcHJpbnRmKCdodHRwczovL3d3dy5nb21hZ2UuY29tL2luZGV4LnBocC9nb21hZ2VfZG93bmxvYWRhYmxlL2tleS9jaGVjaycpKTsgY3VybF9zZXRvcHQoJGNoLCBDVVJMT1BUX1BPU1QsIHRydWUpOyBjdXJsX3NldG9wdCgkY2gsIENVUkxPUFRfUE9TVEZJRUxEUywgJ2tleT0nIC4gdXJsZW5jb2RlKCRrKSAuICcmc2t1PXByb2NhcnQmZG9tYWlucz0nIC4gdXJsZW5jb2RlKGltcGxvZGUoJywnLCAkdGhpcy0+Z2V0QWxsU3RvcmVEb21haW5zKCkpKSAuICcmdmVyPScgLiB1cmxlbmNvZGUoJzIuMi4wJykpOyBjdXJsX3NldG9wdCgkY2gsIENVUkxPUFRfVElNRU9VVCwgMzApOyBjdXJsX3NldG9wdCgkY2gsIENVUkxPUFRfUkVUVVJOVFJBTlNGRVIsIHRydWUpOyBjdXJsX3NldG9wdCgkY2gsIENVUkxPUFRfU1NMX1ZFUklGWVBFRVIsIDApOyBjdXJsX3NldG9wdCgkY2gsIENVUkxPUFRfU1NMX1ZFUklGWUhPU1QsIDApOyAkY29udGVudCA9IGN1cmxfZXhlYygkY2gpOyB0cnkgeyAkciA9IFplbmRfSnNvbjo6ZGVjb2RlKCRjb250ZW50KTsgfSBjYXRjaCAoXEV4Y2VwdGlvbiAkZSkgeyAkciA9IGFycmF5KCk7IH0gJGUgPSBNYWdlOjpoZWxwZXIoJ2NvcmUnKTsgaWYgKGVtcHR5KCRyKSkgeyAkdmFsdWUxID0gTWFnZTo6Z2V0U3RvcmVDb25maWcoJ2dvbWFnZV9hY3RpdmF0aW9uL3Byb2NhcnQvYXInKTsgJGdyb3VwcyA9IGFycmF5KCAncHJvY2FydCcgPT4gYXJyYXkoICdmaWVsZHMnID0+IGFycmF5KCAnYXInID0+IGFycmF5KCAndmFsdWUnID0+ICR2YWx1ZTEgKSwgJ3dlYnNpdGVzJyA9PiBhcnJheSggJ3ZhbHVlJyA9PiAoc3RyaW5nKU1hZ2U6OmdldFN0b3JlQ29uZmlnKCdnb21hZ2VfYWN0aXZhdGlvbi9wcm9jYXJ0L3dlYnNpdGVzJykgKSwgJ3RpbWUnID0+IGFycmF5KCAndmFsdWUnID0+IChzdHJpbmcpJGUtPmVuY3J5cHQoJHZhbHVlMSAuICh0aW1lKCkgLSAoNjAgKiA2MCAqIDI0ICogMTUgLSAxODAwKSkgLiAkdmFsdWUxKSApLCAnY291bnQnID0+IGFycmF5KCAndmFsdWUnID0+ICRjICsgMSkgKSApICk7IE1hZ2U6OmdldE1vZGVsKCdhZG1pbmh0bWwvY29uZmlnX2RhdGEnKSAtPnNldFNlY3Rpb24oJ2dvbWFnZV9hY3RpdmF0aW9uJykgLT5zZXRHcm91cHMoJGdyb3VwcykgLT5zYXZlKCk7IE1hZ2U6OmdldENvbmZpZygpLT5yZWluaXQoKTsgTWFnZTo6YXBwKCktPnJlaW5pdFN0b3JlcygpOyByZXR1cm47IH0gJHZhbHVlMSA9ICcnOyAkdmFsdWUyID0gJyc7IGlmIChpc3NldCgkclsnZCddKSAmJiBpc3NldCgkclsnYyddKSkgeyAkdmFsdWUxID0gJGUtPmVuY3J5cHQoYmFzZTY0X2VuY29kZShaZW5kX0pzb246OmVuY29kZSgkcikpKTsgaWYgKCEkcykgeyAkcyA9IE1hZ2U6OmdldFN0b3JlQ29uZmlnKCdnb21hZ2VfYWN0aXZhdGlvbi9wcm9jYXJ0L3dlYnNpdGVzJyk7IH0gJHMgPSBhcnJheV9zbGljZShleHBsb2RlKCcsJywgJHMpLCAwLCAkclsnYyddKTsgJHZhbHVlMiA9ICRlLT5lbmNyeXB0KCR2YWx1ZTEgLiBpbXBsb2RlKCcsJywgJHMpIC4gJHZhbHVlMSk7IH0gJGdyb3VwcyA9IGFycmF5KCAncHJvY2FydCcgPT4gYXJyYXkoICdmaWVsZHMnID0+IGFycmF5KCAnYXInID0+IGFycmF5KCAndmFsdWUnID0+ICR2YWx1ZTEgKSwgJ3dlYnNpdGVzJyA9PiBhcnJheSggJ3ZhbHVlJyA9PiAoc3RyaW5nKSR2YWx1ZTIgKSwgJ3RpbWUnID0+IGFycmF5KCAndmFsdWUnID0+IChzdHJpbmcpJGUtPmVuY3J5cHQoJHZhbHVlMSAuIHRpbWUoKSAuICR2YWx1ZTEpICksICdpbnN0YWxsZWQnID0+IGFycmF5KCAndmFsdWUnID0+IDEgKSwgJ2NvdW50JyA9PiBhcnJheSggJ3ZhbHVlJyA9PiAwKSApICkgKTsgTWFnZTo6Z2V0TW9kZWwoJ2FkbWluaHRtbC9jb25maWdfZGF0YScpIC0+c2V0U2VjdGlvbignZ29tYWdlX2FjdGl2YXRpb24nKSAtPnNldEdyb3VwcygkZ3JvdXBzKSAtPnNhdmUoKTsgTWFnZTo6Z2V0Q29uZmlnKCktPnJlaW5pdCgpOyBNYWdlOjphcHAoKS0+cmVpbml0U3RvcmVzKCk7IH0gcHVibGljIGZ1bmN0aW9uIGdhKCkgeyAkYXIgPSBiYXNlNjRfZGVjb2RlKE1hZ2U6OmhlbHBlcignY29yZScpLT5kZWNyeXB0KE1hZ2U6OmdldFN0b3JlQ29uZmlnKCdnb21hZ2VfYWN0aXZhdGlvbi9wcm9jYXJ0L2FyJykpKTsgcmV0dXJuICRhciA/IFplbmRfSnNvbjo6ZGVjb2RlKCRhcikgOiBhcnJheSgpOyB9IHB1YmxpYyBmdW5jdGlvbiBnZXRJc0NhcnRQYWdlKCkgeyByZXR1cm4gKChNYWdlOjphcHAoKS0+Z2V0RnJvbnRDb250cm9sbGVyKCktPmdldFJlcXVlc3QoKS0+Z2V0UmVxdWVzdGVkUm91dGVOYW1lKCkgPT0gJ2NoZWNrb3V0JykgJiYgKE1hZ2U6OmFwcCgpLT5nZXRGcm9udENvbnRyb2xsZXIoKS0+Z2V0UmVxdWVzdCgpLT5nZXRSZXF1ZXN0ZWRDb250cm9sbGVyTmFtZSgpID09ICdjYXJ0JykgJiYgKE1hZ2U6OmFwcCgpLT5nZXRGcm9udENvbnRyb2xsZXIoKS0+Z2V0UmVxdWVzdCgpLT5nZXRSZXF1ZXN0ZWRBY3Rpb25OYW1lKCkgPT0gJ2luZGV4JykpOyB9IHB1YmxpYyBmdW5jdGlvbiBpc1doaXNobGlzdE1vdmUoKSB7IHJldHVybiAoTWFnZTo6YXBwKCktPmdldEZyb250Q29udHJvbGxlcigpLT5nZXRSZXF1ZXN0KCktPmdldFBhcmFtKCdncGNfd2lzaGxpc3RfYWRkJykgPT0gMSk7IH0gcHVibGljIGZ1bmN0aW9uIGdldENoYW5nZUF0dHJpYnV0ZUNhcnQoKSB7IHJldHVybiAoKE1hZ2U6OmFwcCgpLT5nZXRGcm9udENvbnRyb2xsZXIoKS0+Z2V0UmVxdWVzdCgpLT5nZXRSZXF1ZXN0ZWRSb3V0ZU5hbWUoKSA9PSAnZ29tYWdlX3Byb2NhcnQnKSAmJiAoTWFnZTo6YXBwKCktPmdldEZyb250Q29udHJvbGxlcigpLT5nZXRSZXF1ZXN0KCktPmdldFJlcXVlc3RlZENvbnRyb2xsZXJOYW1lKCkgPT0gJ3Byb2NhcnQnKSAmJiAoTWFnZTo6YXBwKCktPmdldEZyb250Q29udHJvbGxlcigpLT5nZXRSZXF1ZXN0KCktPmdldFJlcXVlc3RlZEFjdGlvbk5hbWUoKSA9PSAnY2hhbmdlYXR0cmlidXRlY2FydCcpKTsgfSBwdWJsaWMgZnVuY3Rpb24gZ2V0Q2hhbmdlUXR5Q2FydCgpIHsgcmV0dXJuICgoTWFnZTo6YXBwKCktPmdldEZyb250Q29udHJvbGxlcigpLT5nZXRSZXF1ZXN0KCktPmdldFJlcXVlc3RlZFJvdXRlTmFtZSgpID09ICdnb21hZ2VfcHJvY2FydCcpICYmIChNYWdlOjphcHAoKS0+Z2V0RnJvbnRDb250cm9sbGVyKCktPmdldFJlcXVlc3QoKS0+Z2V0UmVxdWVzdGVkQ29udHJvbGxlck5hbWUoKSA9PSAncHJvY2FydCcpICYmIChNYWdlOjphcHAoKS0+Z2V0RnJvbnRDb250cm9sbGVyKCktPmdldFJlcXVlc3QoKS0+Z2V0UmVxdWVzdGVkQWN0aW9uTmFtZSgpID09ICdjaGFuZ2VxdHljYXJ0aXRlbScpKTsgfSBwdWJsaWMgZnVuY3Rpb24gaXNQcm9DYXJ0RW5hYmxlKCkgeyByZXR1cm4gKE1hZ2U6OmdldFN0b3JlQ29uZmlnKCdnb21hZ2VfcHJvY2FydC9nZW5lcmFsL2VuYWJsZScpICYmIGluX2FycmF5KE1hZ2U6OmFwcCgpLT5nZXRTdG9yZSgpLT5nZXRXZWJzaXRlSWQoKSwgJHRoaXMtPmdldEF2YWlsYXZlbFdlYnNpdGVzKCkpKTsgfSBwdWJsaWMgZnVuY3Rpb24gaXNDcm9zc3NlbGxBZGQoKSB7IHJldHVybiAoKE1hZ2U6OmFwcCgpLT5nZXRGcm9udENvbnRyb2xsZXIoKS0+Z2V0UmVxdWVzdCgpLT5nZXRQYXJhbSgnZ3BjX2Nyb3Nzc2VsbCcpID09IDEpIHx8IChNYWdlOjphcHAoKS0+Z2V0RnJvbnRDb250cm9sbGVyKCktPmdldFJlcXVlc3QoKS0+Z2V0UGFyYW0oJ2dwY19hZGQnKSA9PSAxKSk7IH0gcHVibGljIGZ1bmN0aW9uIGlzUHJvZHVjdFJldmlld1BhZ2UoKSB7IHJldHVybiBNYWdlOjphcHAoKS0+Z2V0RnJvbnRDb250cm9sbGVyKCktPmdldFJlcXVlc3QoKS0+Z2V0UmVxdWVzdGVkUm91dGVOYW1lKCkgPT0gJ3Jldmlldyc7IH0gcHVibGljIGZ1bmN0aW9uIGlzU2hvcHBpbmdDYXJ0RGlzYWJsZSgpIHsgaWYgKGNvdW50KE1hZ2U6OmdldFNpbmdsZXRvbignY2hlY2tvdXQvc2Vzc2lvbicpLT5nZXRNZXNzYWdlcyhmYWxzZSktPmdldEl0ZW1zKE1hZ2VfQ29yZV9Nb2RlbF9NZXNzYWdlOjpFUlJPUikpICYmICR0aGlzLT5pc1Byb0NhcnRFbmFibGUoKSkgeyByZXR1cm4gZmFsc2U7IH0gJHByb2NhcnQgPSAoTWFnZTo6Z2V0U3RvcmVDb25maWcoJ2dvbWFnZV9wcm9jYXJ0L2dlbmVyYWwvZGlzYWJsZV9jYXJ0JykgJiYgJHRoaXMtPmlzUHJvQ2FydEVuYWJsZSgpKTsgaWYgKCRwcm9jYXJ0KSB7IHJldHVybiB0cnVlOyB9ICRfbW9kdWxlcyA9IE1hZ2U6OmdldENvbmZpZygpLT5nZXROb2RlKCdtb2R1bGVzJyktPmNoaWxkcmVuKCk7ICRfbW9kdWxlc0FycmF5ID0gKGFycmF5KSRfbW9kdWxlczsgJGxpZ2h0Y2hlY2tvdXQgPSAoaXNzZXQoJF9tb2R1bGVzQXJyYXlbJ0dvTWFnZV9DaGVja291dCddKSAmJiAkX21vZHVsZXNBcnJheVsnR29NYWdlX0NoZWNrb3V0J10tPmlzKCdhY3RpdmUnKSk7IGlmICghJGxpZ2h0Y2hlY2tvdXQpIHsgcmV0dXJuIGZhbHNlOyB9ICRsaWdodGNoZWNrb3V0ID0gKE1hZ2U6OmhlbHBlcignZ29tYWdlX2NoZWNrb3V0JyktPmdldENvbmZpZ0RhdGEoJ2dlbmVyYWwvZGlzYWJsZV9jYXJ0JykgJiYgTWFnZTo6aGVscGVyKCdnb21hZ2VfY2hlY2tvdXQnKS0+Z2V0Q29uZmlnRGF0YSgnZ2VuZXJhbC9lbmFibGVkJykgJiYgaW5fYXJyYXkoTWFnZTo6YXBwKCktPmdldFN0b3JlKCktPmdldFdlYnNpdGVJZCgpLCBNYWdlOjpoZWxwZXIoJ2dvbWFnZV9jaGVja291dCcpLT5nZXRBdmFpbGF2ZWxXZWJzaXRlcygpKSk7IHJldHVybiAkbGlnaHRjaGVja291dDsgfSBwdWJsaWMgZnVuY3Rpb24gZ2V0UHJvY2FydFByb2R1Y3REYXRhKCRwcm9kdWN0LCAkY2FydCA9IGZhbHNlLCAkcGFyZW50X2lkID0gZmFsc2UpIHsgJHN0b2NrX2l0ZW0gPSBNYWdlOjpnZXRNb2RlbCgnY2F0YWxvZ2ludmVudG9yeS9zdG9ja19pdGVtJyktPmxvYWRCeVByb2R1Y3QoJHByb2R1Y3QpOyBpZiAoJHN0b2NrX2l0ZW0tPmdldE1hbmFnZVN0b2NrKCkgJiYgISRzdG9ja19pdGVtLT5nZXRCYWNrb3JkZXJzKCkpIHsgJG1pbl9xdHkgPSAkc3RvY2tfaXRlbS0+Z2V0TWluU2FsZVF0eSgpOyBpZiAoJHByb2R1Y3QtPmdldFR5cGVJZCgpID09IE1hZ2VfQ2F0YWxvZ19Nb2RlbF9Qcm9kdWN0X1R5cGU6OlRZUEVfU0lNUExFKSB7ICRtYXhfcXR5ID0gbWluKGFycmF5KCRzdG9ja19pdGVtLT5nZXRNYXhTYWxlUXR5KCksICRzdG9ja19pdGVtLT5nZXRRdHkoKSkpOyB9IGVsc2UgeyAkbWF4X3F0eSA9ICRzdG9ja19pdGVtLT5nZXRNYXhTYWxlUXR5KCk7IH0gJHF1b3RlID0gTWFnZTo6Z2V0U2luZ2xldG9uKCdjaGVja291dC9zZXNzaW9uJyktPmdldFF1b3RlKCk7ICRpdGVtID0gJHF1b3RlLT5nZXRJdGVtQnlQcm9kdWN0KCRwcm9kdWN0KTsgaWYgKCRpdGVtICYmICRxdHkgPSAkaXRlbS0+Z2V0UXR5KCkpIHsgJG1heF9xdHkgPSAkbWF4X3F0eSAtICRxdHk7IGlmICgkbWluX3F0eSA+ICRtYXhfcXR5KSB7ICRtaW5fcXR5ID0gJG1heF9xdHk7IH0gfSB9IGVsc2UgeyAkbWluX3F0eSA9ICRzdG9ja19pdGVtLT5nZXRNaW5TYWxlUXR5KCk7ICRtYXhfcXR5ID0gJHN0b2NrX2l0ZW0tPmdldE1heFNhbGVRdHkoKTsgfSBpZiAoJHBhcmVudF9pZCB8fCAkcHJvZHVjdC0+Z2V0VHlwZUlkKCkgPT0gTWFnZV9DYXRhbG9nX01vZGVsX1Byb2R1Y3RfVHlwZTo6VFlQRV9HUk9VUEVEKSB7ICRtaW5fcXR5ID0gMDsgfSAkcXR5X2luY3JlbWVudHMgPSAkc3RvY2tfaXRlbS0+Z2V0UXR5SW5jcmVtZW50cygpOyBpZiAoJHF0eV9pbmNyZW1lbnRzICYmICEkcGFyZW50X2lkKSB7ICRtaW5fcXR5ID0gJHF0eV9pbmNyZW1lbnRzOyB9IGlmICgkcGFyZW50X2lkKSB7ICRwYXJlbnRfcHJvZHVjdCA9IE1hZ2U6OmdldE1vZGVsKCdjYXRhbG9nL3Byb2R1Y3QnKS0+bG9hZCgkcGFyZW50X2lkKTsgaWYgKCRwYXJlbnRfcHJvZHVjdC0+Z2V0VHlwZUlkKCkgPT0gTWFnZV9DYXRhbG9nX01vZGVsX1Byb2R1Y3RfVHlwZTo6VFlQRV9DT05GSUdVUkFCTEUpIHsgJHByb2R1Y3RfZGF0YSA9IE1hZ2U6OmdldE1vZGVsKCdjYXRhbG9naW52ZW50b3J5L3N0b2NrX2l0ZW0nKS0+bG9hZEJ5UHJvZHVjdCgkcGFyZW50X3Byb2R1Y3QpOyAkcXR5X2luY3JlbWVudHMgPSAkcHJvZHVjdF9kYXRhLT5nZXRRdHlJbmNyZW1lbnRzKCk7ICRtaW5fcXR5ID0gJHF0eV9pbmNyZW1lbnRzOyB9IH0gJGJsb2NrX3Byb2R1Y3RfbGlzdCA9IE1hZ2U6OmdldEJsb2NrU2luZ2xldG9uKCdjYXRhbG9nL3Byb2R1Y3RfbGlzdCcpOyByZXR1cm4gYXJyYXkoICdtaW5fcXR5JyA9PiBpbnR2YWwoJG1pbl9xdHkpLCAnbWF4X3F0eScgPT4gaW50dmFsKCRtYXhfcXR5KSwgJ25hbWUnID0+ICRwcm9kdWN0LT5nZXROYW1lKCksICdpc19zaW1wbGUnID0+ICgkcHJvZHVjdC0+Z2V0VHlwZUlkKCkgPT0gTWFnZV9DYXRhbG9nX01vZGVsX1Byb2R1Y3RfVHlwZTo6VFlQRV9TSU1QTEUgPyAxIDogMCksICdpc19ncm91cGVkJyA9PiAoJHByb2R1Y3QtPmdldFR5cGVJZCgpID09IE1hZ2VfQ2F0YWxvZ19Nb2RlbF9Qcm9kdWN0X1R5cGU6OlRZUEVfR1JPVVBFRCA/IDEgOiAwKSwgJ2lzX2J1bmRsZWQnID0+ICgkcHJvZHVjdC0+Z2V0VHlwZUlkKCkgPT0gTWFnZV9DYXRhbG9nX01vZGVsX1Byb2R1Y3RfVHlwZTo6VFlQRV9CVU5ETEUgPyAxIDogMCksICdpc19naWZ0Y2FyZCcgPT4gKCRwcm9kdWN0LT5nZXRUeXBlSWQoKSA9PSAnZ2lmdGNhcmQnID8gMSA6IDApLCAncGFyZW50X2lkJyA9PiAkcGFyZW50X2lkLCAncHJvZHVjdF91cmwnID0+ICRwcm9kdWN0LT5nZXRQcm9kdWN0VXJsKCksICdhZGR0b2NhcnRfdXJsJyA9PiAkYmxvY2tfcHJvZHVjdF9saXN0LT5nZXRBZGRUb0NhcnRVcmwoJHByb2R1Y3QpLCAnaW5jcmVtZW50cycgPT4gKCRxdHlfaW5jcmVtZW50cyA/ICRxdHlfaW5jcmVtZW50cyA6IDEpICk7IH0gcHVibGljIGZ1bmN0aW9uIGlzQ29uZmlndXJlQ2FydCgpIHsgcmV0dXJuIHN0cnBvcyhNYWdlOjpoZWxwZXIoJ2NvcmUvdXJsJyktPmdldEN1cnJlbnRVcmwoKSwgJ2NvbmZpZ3VyZS9pZCcpID8gMSA6IDA7IH0gcHVibGljIGZ1bmN0aW9uIGdldEJ1bmRsZVByb2R1Y3RTZWxlY3Rpb25zKCRwYXJlbnRQcm9kdWN0KSB7ICR0eXBlSW5zdGFuY2UgPSAkcGFyZW50UHJvZHVjdC0+Z2V0VHlwZUluc3RhbmNlKHRydWUpOyByZXR1cm4gJHR5cGVJbnN0YW5jZS0+Z2V0U2VsZWN0aW9uc0NvbGxlY3Rpb24oICR0eXBlSW5zdGFuY2UtPmdldE9wdGlvbnNJZHMoJHBhcmVudFByb2R1Y3QpLCAkcGFyZW50UHJvZHVjdCApOyB9IHB1YmxpYyBmdW5jdGlvbiBnZXRJc0FueW1vcmVWZXJzaW9uKCRtYWpvciwgJG1pbm9yLCAkcmV2aXNpb24gPSAwKSB7ICR2ZXJzaW9uX2luZm8gPSBNYWdlOjpnZXRWZXJzaW9uKCk7ICR2ZXJzaW9uX2luZm8gPSBleHBsb2RlKCcuJywgJHZlcnNpb25faW5mbyk7IGlmICgkdmVyc2lvbl9pbmZvWzBdID4gJG1ham9yKSB7IHJldHVybiB0cnVlOyB9IGVsc2VpZiAoJHZlcnNpb25faW5mb1swXSA9PSAkbWFqb3IpIHsgaWYgKCR2ZXJzaW9uX2luZm9bMV0gPiAkbWlub3IpIHsgcmV0dXJuIHRydWU7IH0gZWxzZWlmICgkdmVyc2lvbl9pbmZvWzFdID09ICRtaW5vcikgeyBpZiAoJHZlcnNpb25faW5mb1syXSA+PSAkcmV2aXNpb24pIHsgcmV0dXJuIHRydWU7IH0gZWxzZSB7IHJldHVybiBmYWxzZTsgfSB9IGVsc2UgeyByZXR1cm4gZmFsc2U7IH0gfSBlbHNlIHsgcmV0dXJuIGZhbHNlOyB9IH0gcHVibGljIGZ1bmN0aW9uIGZvcm1hdENvbG9yKCR2YWx1ZSkgeyBpZiAoJHZhbHVlID0gcHJlZ19yZXBsYWNlKCcvW15hLXpBLVowLTlcc10vJywgJycsICR2YWx1ZSkpIHsgJHZhbHVlID0gJyMnIC4gJHZhbHVlOyB9IHJldHVybiAkdmFsdWU7IH0gcHVibGljIGZ1bmN0aW9uIGlzRW50ZXJwcmlzZSgpIHsgJG1vZHVsZXMgPSBhcnJheV9rZXlzKChhcnJheSlNYWdlOjpnZXRDb25maWcoKS0+Z2V0Tm9kZSgnbW9kdWxlcycpLT5jaGlsZHJlbigpKTsgcmV0dXJuIGluX2FycmF5KCdFbnRlcnByaXNlX0VudGVycHJpc2UnLCAkbW9kdWxlcyk7IH0gcHVibGljIGZ1bmN0aW9uIGdldElzVWx0aW1lbnRvVGhlbWUoKSB7ICRtb2R1bGVzID0gKGFycmF5KU1hZ2U6OmdldENvbmZpZygpLT5nZXROb2RlKCdtb2R1bGVzJyktPmNoaWxkcmVuKCk7IGlmICghaXNzZXQoJG1vZHVsZXNbJ1VsdGltZW50b19UaGVtZSddKSkgeyByZXR1cm4gZmFsc2U7IH0gcmV0dXJuICRtb2R1bGVzWydVbHRpbWVudG9fVGhlbWUnXS0+aXMoJ2FjdGl2ZScpOyB9IHB1YmxpYyBmdW5jdGlvbiBpc0luZm9ydGlzVWx0aW1vKCkgeyBpZiAoJHRoaXMtPmlzX2luZm9ydGlzX3VsdGltbyA9PT0gbnVsbCkgeyAkbW9kdWxlcyA9IChhcnJheSlNYWdlOjpnZXRDb25maWcoKS0+Z2V0Tm9kZSgnbW9kdWxlcycpIC0+Y2hpbGRyZW4oKTsgaWYgKCAhaXNzZXQoJG1vZHVsZXNbJ0luZm9ydGlzX1VsdGltbyddKSB8fCAhJG1vZHVsZXNbJ0luZm9ydGlzX1VsdGltbyddLT5pcygnYWN0aXZlJykgfHwgKE1hZ2U6OmdldFN0b3JlQ29uZmlnKCdkZXNpZ24vcGFja2FnZS9uYW1lJykgIT09ICd1bHRpbW8nKSApIHsgJHRoaXMtPmlzX2luZm9ydGlzX3VsdGltbyA9IGZhbHNlOyB9IGVsc2UgeyAkdGhpcy0+aXNfaW5mb3J0aXNfdWx0aW1vID0gdHJ1ZTsgfSB9IHJldHVybiAkdGhpcy0+aXNfaW5mb3J0aXNfdWx0aW1vOyB9IC8qKiAqIEdldCBzd2F0Y2hlcyBwcm9kdWN0IGphdmFzY3JpcHQgKiAqIEByZXR1cm4gc3RyaW5nICovIHB1YmxpYyBmdW5jdGlvbiBnZXRTd2F0Y2hlc1Byb2R1Y3RKcygpIHsgJG1vZHVsZXMgPSAoYXJyYXkpTWFnZTo6Z2V0Q29uZmlnKCktPmdldE5vZGUoJ21vZHVsZXMnKS0+Y2hpbGRyZW4oKTsgaWYgKGlzc2V0KCRtb2R1bGVzWydNYWdlX0NvbmZpZ3VyYWJsZVN3YXRjaGVzJ10pICYmICRtb2R1bGVzWydNYWdlX0NvbmZpZ3VyYWJsZVN3YXRjaGVzJ10tPmlzKCdhY3RpdmUnKSkgeyByZXR1cm4gJ2pzL2NvbmZpZ3VyYWJsZXN3YXRjaGVzL3N3YXRjaGVzLXByb2R1Y3QuanMnOyB9IHJldHVybiAnJzsgfSBwdWJsaWMgZnVuY3Rpb24gbm90aWZ5KCkgeyAkZnJlcXVlbmN5ID0gaW50dmFsKE1hZ2U6OmFwcCgpLT5sb2FkQ2FjaGUoJ2dvbWFnZV9ub3RpZmljYXRpb25zX2ZyZXF1ZW5jeScpKTsgaWYgKCEkZnJlcXVlbmN5KSB7ICRmcmVxdWVuY3kgPSAyNDsgfSAkbGFzdF91cGRhdGUgPSBpbnR2YWwoTWFnZTo6YXBwKCktPmxvYWRDYWNoZSgnZ29tYWdlX25vdGlmaWNhdGlvbnNfbGFzdF91cGRhdGUnKSk7IGlmICgoJGZyZXF1ZW5jeSAqIDYwICogNjAgKyAkbGFzdF91cGRhdGUpID4gdGltZSgpKSB7IHJldHVybiBmYWxzZTsgfSAkdGltZXN0YW1wID0gJGxhc3RfdXBkYXRlOyBpZiAoISR0aW1lc3RhbXApIHsgJHRpbWVzdGFtcCA9IHRpbWUoKTsgfSB0cnkgeyAkY2ggPSBjdXJsX2luaXQoKTsgY3VybF9zZXRvcHQoJGNoLCBDVVJMT1BUX1VSTCwgc3ByaW50ZignaHR0cHM6Ly93d3cuZ29tYWdlLmNvbS9pbmRleC5waHAvZ29tYWdlX25vdGlmaWNhdGlvbi9pbmRleC9kYXRhJykpOyBjdXJsX3NldG9wdCgkY2gsIENVUkxPUFRfUE9TVCwgdHJ1ZSk7IGN1cmxfc2V0b3B0KCRjaCwgQ1VSTE9QVF9QT1NURklFTERTLCAnc2t1PXByb2NhcnQmdGltZXN0YW1wPScgLiAkdGltZXN0YW1wIC4gJyZ2ZXI9JyAuIHVybGVuY29kZSgnMi4yLjAnKSk7IGN1cmxfc2V0b3B0KCRjaCwgQ1VSTE9QVF9USU1FT1VULCAzMCk7IGN1cmxfc2V0b3B0KCRjaCwgQ1VSTE9QVF9SRVRVUk5UUkFOU0ZFUiwgdHJ1ZSk7IGN1cmxfc2V0b3B0KCRjaCwgQ1VSTE9QVF9TU0xfVkVSSUZZUEVFUiwgMCk7IGN1cmxfc2V0b3B0KCRjaCwgQ1VSTE9QVF9TU0xfVkVSSUZZSE9TVCwgMCk7ICRjb250ZW50ID0gY3VybF9leGVjKCRjaCk7IHRyeSB7ICRyZXN1bHQgPSBaZW5kX0pzb246OmRlY29kZSgkY29udGVudCk7IH0gY2F0Y2ggKFxFeGNlcHRpb24gJGUpIHsgJHJlc3VsdCA9IGFycmF5KCk7IH0gaWYgKCRyZXN1bHQgJiYgaXNzZXQoJHJlc3VsdFsnZnJlcXVlbmN5J10pICYmICgkcmVzdWx0WydmcmVxdWVuY3knXSAhPSAkZnJlcXVlbmN5KSkgeyBNYWdlOjphcHAoKS0+c2F2ZUNhY2hlKCRyZXN1bHRbJ2ZyZXF1ZW5jeSddLCAnZ29tYWdlX25vdGlmaWNhdGlvbnNfZnJlcXVlbmN5Jyk7IH0gaWYgKCRyZXN1bHQgJiYgaXNzZXQoJHJlc3VsdFsnZGF0YSddKSkgeyBpZiAoIWVtcHR5KCRyZXN1bHRbJ2RhdGEnXSkpIHsgTWFnZTo6Z2V0TW9kZWwoJ2FkbWlubm90aWZpY2F0aW9uL2luYm94JyktPnBhcnNlKCRyZXN1bHRbJ2RhdGEnXSk7IH0gfSB9IGNhdGNoIChFeGNlcHRpb24gJGUpIHsgfSBNYWdlOjphcHAoKS0+c2F2ZUNhY2hlKHRpbWUoKSwgJ2dvbWFnZV9ub3RpZmljYXRpb25zX2xhc3RfdXBkYXRlJyk7IH0gfQ=="));